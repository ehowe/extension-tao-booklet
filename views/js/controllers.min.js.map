{"version":3,"file":"routes.js","sources":["routes.js","Booklet/editBooklet.js","Booklet/wizard.js"],"names":[],"mappings":"AAqBA,OAAA,kCAAA,WAGA,OACA,SACA,SACA,YAAA,iCACA,OAAA,iCCVA,OAAA,6CAAA,SAAA,SAAA,SAAA,UAAA,sBAAA,kBAAA,SAAA,EAAA,EAAA,OAAA,QAAA,uBAAA,SAOA,QAAA,iBAAA,YAEA,GAAA,aAAA,WAAA,OAEA,WAAA,SAAA,KACA,WAAA,OAAA,MAAA,YAAA,YAGA,OAAA,EAAA,UAAA,YAAA,eAAA,KAEA,YAAA,OAAA,OAAA,YAAA,OAEA,OAAA,GAAA,SAAA,SAAA,GACA,WAAA,EAAA,EAAA,QAAA,SAGA,GAAA,wBAAA,IAAA,YAAA,SAAA,QAAA,QAAA,KAAA,UAAA,cAAA,QACA,SAAA,YAAA,SACA,QAAA,YAAA,QACA,UACA,YAAA,YAAA,YACA,YAAA,YAAA,aAEA,aAAA,YAAA,aACA,kBACA,UAAA,YAAA,UACA,SAAA,YAAA,UAEA,aAAA,WACA,QACA,UACA,iBACA,QAAA,KAAA,cAAA,UAAA,eACA,IAAA,YAAA;EAGA,SAAA,KAIA,OACA,MAAA,WAEA,GAAA,aAAA,EAAA,aAAA,MACA,GAAA,QAAA,OAAA,aAEA,EAAA,iBAAA,GAAA,QAAA,SAAA,GACA,EAAA,gBACA,IAAA,OAAA,EAAA,EAAA,QAAA,QAAA,OAEA,aAAA,KAAA,MAAA,QAAA,KAAA,WAAA,UAAA,cACA,IAAA,MAAA,KAAA,qBAAA,MACA,SAAA,MAAA,KAAA,0BAAA,MACA,GAAA,MAAA,KAAA,oBAAA,WAIA,gBAAA,EAAA,yBChEA,OAAA,wCAAA,UAAA,SAAA,GAGA,OACA,MAAA,WAEA,GAAA,OAAA,EAAA,oBAAA,KAAA,QAEA,OAAA,EAAA,UAAA,MAAA,KAAA,mBAAA,MAAA,KACA,QAAA,GAAA,aACA,OAAA,OAAA,UAAA,KAAA,WAAA","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoBooklet/controller/routes',[],function () {\n    'use strict';\n\n    return {\n        'Booklet': {\n            'actions': {\n                'editBooklet' : 'controller/Booklet/editBooklet',\n                'wizard'      : 'controller/Booklet/wizard'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\ndefine('taoBooklet/controller/Booklet/editBooklet',['jquery', 'lodash', 'module', 'helpers', 'generis.tree.select', 'layout/section'], function ($, _, module, helpers, GenerisTreeSelectClass, section) {\n    'use strict';\n\n    /**\n     * Builds group tree inside target container\n     * @param {jQueryElement} $container\n     */\n    function buildGroupsTree($container) {\n\n        var treeOptions = $container.data();\n\n        var toggleTree = function(val) {\n            $container.toggle(val !== treeOptions.anonymous);\n        };\n\n        var $radio = $('[name=\"' + treeOptions.anonymousClass + '\"]');\n\n        toggleTree($radio.filter(':checked').val());\n\n        $radio.on('change', function (e) {\n            toggleTree($(e.target).val());\n        });\n\n        new GenerisTreeSelectClass('#' + treeOptions.actionId + '-tree', helpers._url('getData', 'GenerisTree', 'tao'), {\n            actionId: treeOptions.actionId,\n            saveUrl: treeOptions.saveUrl,\n            saveData: {\n                resourceUri: treeOptions.resourceUri,\n                propertyUri: treeOptions.propertyUri\n            },\n            checkedNodes: treeOptions.checkedNodes,\n            serverParameters: {\n                openNodes: treeOptions.openNodes,\n                rootNode: treeOptions.rootNode\n            },\n            saveCallback: function () {\n                section\n                    .current()\n                    .loadContentBlock(\n                    helpers._url('editBooklet', 'Booklet', 'taoBooklet'),\n                    {uri: treeOptions.resourceUri}\n                );\n            },\n            paginate: 10\n        });\n    }\n\n    return {\n        start: function () {\n\n            var $downloader = $('<iframe/>').hide();\n            $('form').append($downloader);\n\n            $('.btn-download').on('click', function (e) {\n                e.preventDefault();\n                var $form = $(e.target).closest('form');\n\n                $downloader.attr('src', helpers._url('download', 'Booklet', 'taoBooklet', {\n                    uri: $form.find('input[name=\"uri\"]').val(),\n                    classUri: $form.find('input[name=\"classUri\"]').val(),\n                    id: $form.find('input[name=\"id\"]').val()\n                }));\n            });\n\n            buildGroupsTree($('.group-container'));\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\ndefine('taoBooklet/controller/Booklet/wizard',['jquery'], function ($) {\n    'use strict';\n\n    return {\n        start: function () {\n\n            var $form = $('.main-container ').find('form');\n\n            var $radio = $('[name=\"' + $form.find('#anonymousClass').val() + '\"]');\n            if (!$radio.is(':checked')) {\n                $radio.filter(':first').attr('checked', true);\n            }\n\n        }\n    };\n});\n\n"]}